define(["jquery","appconfig","wsbcore/helper","js!//api.mapbox.com/mapbox.js/v2.4.0/mapbox.js","css!//api.mapbox.com/mapbox.js/v2.4.0/mapbox.css"],function(e,o){function a(o,a){e.getJSON(o,function(e){e&&a(JSON.stringify(e))})}function n(e,o){l[e]=o}function r(e){return l[e]}function t(o,t,s,c,l){o&&o._leaflet&&(e(o).find(".leaflet-map-pane").remove(),e(o).find(".leaflet-control-container").remove(),o._leaflet=!1),""===t.trim()&&(t=p.address);var f=p.apiKey||c,u=p.apiurl.replace("{0}",encodeURIComponent(t))+f,d=r(t);d?i(o,t,[d.features[0].center[0],d.features[0].center[1]],s,c,l):a(u,function(e){d=JSON.parse(e),n(t,d),i(o,t,[d.features[0].center[0],d.features[0].center[1]],s,c,l)})}function i(o,a,n,r,t,i){if(!o)return void s();a&&n||(a=p.address,n=p.defaultCordinates);var c=null,l=n[0],f=n[1],u={container:o,style:"mapbox://styles/mapbox/streets-v9",zoom:14,center:n,bufferSize:128},d=e.extend({},u,r||{});if(L.mapbox.accessToken=p.apiKey||t,o){o._leaflet&&(e(o).find(".leaflet-map-pane").remove(),e(o).find(".leaflet-control-container").remove(),o._leaflet=!1),c=L.mapbox.map(o,"mapbox.streets",{zoomControl:i?!0:!1}).setView([f,l],d.zoom);var m=new L.Marker(new L.LatLng(f,l));c.addLayer(m),c.invalidateSize(),i||(c.dragging.disable(),c.touchZoom.disable(),c.doubleClickZoom.disable(),c.scrollWheelZoom.disable())}}function s(){require(["/i18n/resources/client","wsbcore/growl"],function(o){e("<div></div>").sfGrowl({title:o.resources.Client__Designer__Yikes_hit_a_snag,content:o.resources.Server__There_has_been_an_unexpected_error,icon:"error"})})}function c(e,o){var n="";e&&""!=e.trim()?a(p.apiurl.replace("{0}",encodeURIComponent(e))+p.apiKey,function(e){var a=JSON.parse(e);if(a){var n=a.features[0].place_name;o(n)}}):o(n)}var l={},p={language:"en_US",apiKey:o.mapboxApiKey,address:"Scottsdale, Arizona, US",zoom:14,defaultCordinates:[-111.8992,33.5091],apiurl:"https://api.mapbox.com/geocoding/v5/mapbox.places/{0}.json?access_token="};return{generateMap:t,getAddressAutoComplete:function(e,o){a(p.apiurl.replace("{0}",encodeURIComponent(e))+p.apiKey,o)},getClosestStreetAddress:function(e,o){c(e,o)}}});
//# sourceMappingURL=mapbox.js.map